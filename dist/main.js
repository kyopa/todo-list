(()=>{"use strict";const t=[];function e(e){t.push({projectTitle:e,id:crypto.randomUUID(),tasks:[]}),i(e)}let n,o,d,c,l,r;function i(e){return o=t.find((t=>t.projectTitle===e)),n=o.id,{projectId:n,project:o}}function a(t){return d=o.tasks.find((e=>e.title===t)),l=d,c=d.id,c}function s(t,e,n,o){i(t),a(e),d[n]=o}function u(t,e){i(t),a(e),function(t,e){r=t.tasks.indexOf(e)}(o,d),o.tasks.splice(r,1)}function p(t,e,n,d,c){i(t),o.tasks.push({title:e,id:crypto.randomUUID(),desc:n,dueDate:d,priority:c}),a(e)}e("Default"),e("random stuff"),p("Default","first task","desc","due Date","urgent"),p("Default","second task","desc","due date","no urgent"),p("Default","third task","desc","due date","no urgent"),p("random stuff","fourth task","desc","due date","very urgent");const m=document.querySelector("#content"),b=document.createElement("div");b.style.marginBottom="14px",m.appendChild(b);const y=document.createElement("div");y.setAttribute("style","width: 150px; display: block"),b.appendChild(y);const f=document.createElement("button");f.setAttribute("style","color: orange; background-color: black"),f.textContent="Show Projects",b.insertBefore(f,y);let k=crypto.randomUUID();const E=document.createElement("div");function v(t){const e=document.createElement("div");e.classList.add("box"),E.appendChild(e);const n=document.createElement("button");n.setAttribute("style","background-color: black; color: yellow"),n.setAttribute("data-id",crypto.randomUUID()),n.textContent=t.projectTitle,e.appendChild(n),n.addEventListener("click",(()=>{n.disabled=!0,i(n.textContent),function(t,e,n){const o=document.createElement("div");o.setAttribute("style","display: block; border: 1px solid red"),t.appendChild(o);const d=document.createElement("div");d.setAttribute("style","display: flex; flex-direction: column; align-items: flex-start"),o.appendChild(d);for(let t of e.tasks)g(t,d);const c=document.createElement("div");c.setAttribute("style","display: flex; gap: 10px"),o.appendChild(c);const r=document.createElement("button");r.setAttribute("style","background-color: black; color: yellow"),r.textContent="Hide",c.appendChild(r);const i=document.createElement("button");i.setAttribute("style","background-color: black; color: orange"),i.textContent="New task",c.appendChild(i),i.addEventListener("click",(()=>{i.disabled=!0;const t=document.createElement("div");o.appendChild(t);const n=C("title",t),c=C("description",t),r=document.createElement("input");r.setAttribute("type","date"),t.appendChild(r);const s=C("priority",t),u=document.createElement("button");u.setAttribute("style","background-color: aqua; border-radius: 5px "),u.textContent="Add",t.appendChild(u),u.addEventListener("click",(()=>{i.disabled=!1,t.style.display="none",p(e.projectTitle,n.value,c.value,r.value,s.value),a(n.value),g(l,d)}))})),r.addEventListener("click",(()=>{n.disabled=!1,function(t,e){t.style.display="none",e.style.display="none"}(o,r)}))}(e,o,n)}))}y.appendChild(E),function(){const t=document.createElement("input");t.setAttribute("style","background-color: black; color: gold; margin-top: 20px"),t.setAttribute("value","Project Name"),t.setAttribute("data-id",k),y.appendChild(t)}(),function(){const t=document.createElement("button");t.setAttribute("style","color: orange; background-color: black"),t.setAttribute("data-id",crypto.randomUUID()),t.textContent="Add",y.appendChild(t),t.addEventListener("click",(()=>{e(document.querySelector(`[data-id="${k}"]`).value),i(document.querySelector(`[data-id="${k}"]`).value),v(o)}))}(),function(){for(let e of t)v(e)}(),y.style.display="none";const C=(t,e)=>{const n=document.createElement("input");return n.setAttribute("style","border: 0; font-size: .9rem; background-color: transparent"),n.setAttribute("value",t),e.appendChild(n),n};function g(e,n){const d=document.createElement("div");n.appendChild(d);const c=document.createElement("button");c.setAttribute("style","background-color: grey; color: white; border: 0; border-radius: 6px; height: fit-content"),c.textContent="delete",d.appendChild(c),c.addEventListener("click",(()=>{u(o.projectTitle,e.title),console.log(t),d.remove()}));const l=document.createElement("button");l.setAttribute("style","background-color: transparent; border: 0; font-weight: bold"),l.textContent=e.title,d.insertBefore(l,c),l.addEventListener("click",(()=>{l.disabled=!0,console.log(e),function(t,e,n){const o=document.createElement("div");e.appendChild(o),h(t,"desc",o).style.opacity=.6,h(t,"dueDate",o),h(t,"priority",o);const d=document.createElement("strong");d.textContent="close",o.appendChild(d),d.addEventListener("click",(()=>{n.disabled=!1,o.style.display="none"}))}(e,d,l)}))}function h(t,e,n){const o=document.createElement("div");return o.textContent=t[e],n.appendChild(o),o.addEventListener("click",(()=>{x(n,o,e,t)})),o}function x(e,n,d,c){const l=document.createElement("button");l.textContent="save",e.replaceChild(l,n),l.addEventListener("click",(()=>{!function(e,n,d){s(o.projectTitle,d.title,n,e.value),console.log(t)}(r,d,c);const n=document.createElement("div");n.textContent=c[d],e.replaceChild(n,r),l.style.display="none",n.addEventListener("click",(()=>{x(e,n,d,c)}))}));const r=document.createElement("input");r.setAttribute("value",n.textContent),r.setAttribute("style","border: 0; background-color: transparent; font-size: 1rem"),e.insertBefore(r,l)}f.addEventListener("click",(()=>{A.style.display="block",f.style.display="none",y.style.display="block",A.addEventListener("click",(()=>{f.style.display="block",A.style.display="none",y.style.display="none"}))}));const A=document.createElement("button");A.textContent="Hide Projects",b.insertBefore(A,y),A.style.marginBottom="20px",A.style.display="none",console.log("E"),console.log(localStorage)})();