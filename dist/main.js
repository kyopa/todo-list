(()=>{"use strict";const t=JSON.parse(localStorage.getItem("allProjects"))??[];let e,n,o,l,c,r;function d(o){return n=t.find((t=>t.projectTitle===o)),e=n.id,{projectId:e,project:n}}function i(t){return o=n.tasks.find((e=>e.title===t)),c=o,l=o.id,l}function a(t,e,n,l){d(t),i(e),o[n]=l}function u(t,e){d(t),i(e),function(t,e){r=t.tasks.indexOf(e)}(n,o),n.tasks.splice(r,1)}function p(e,l,c,r,a){d(e),n.tasks.push({title:l,id:crypto.randomUUID(),desc:c,dueDate:r,priority:a}),i(l),localStorage.setItem(n.projectTitle,JSON.stringify(n.tasks)),localStorage.setItem(l,JSON.stringify(o)),localStorage.setItem("allProjects",JSON.stringify(t))}const m=document.querySelector("#content"),y=document.createElement("div");y.style.marginBottom="14px",m.appendChild(y);const b=document.createElement("div");b.setAttribute("style","width: fit-content; display: block"),y.appendChild(b);const g=document.createElement("button");g.setAttribute("style","color: orange; background-color: black"),g.textContent="Show Projects",y.insertBefore(g,b);const f=document.createElement("div");f.setAttribute("style","display: grid; grid-template-columns: repeat(4, 40px); grid-template-rows: repeat(2, 40px)"),b.appendChild(f);let E=crypto.randomUUID();const k=document.createElement("div");function v(t){const e=document.createElement("div");e.classList.add("box"),b.insertBefore(e,f);const o=document.createElement("button");o.setAttribute("style","background-color: black; color: yellow"),o.setAttribute("data-id",crypto.randomUUID()),o.textContent=t.projectTitle,e.appendChild(o),o.addEventListener("click",(()=>{o.disabled=!0,d(o.textContent),console.log(JSON.parse(localStorage.getItem(n.projectTitle))),function(t,e,n){const o=document.createElement("div");o.setAttribute("style","display: block; border: 1px solid red"),t.appendChild(o);const l=document.createElement("div");let r;l.setAttribute("style","display: flex; flex-direction: column; align-items: flex-start"),o.appendChild(l),r=JSON.parse(localStorage.getItem(e.projectTitle))?JSON.parse(localStorage.getItem(e.projectTitle)):e.tasks;for(let t of r)x(t,l);const d=document.createElement("div");d.setAttribute("style","display: flex; gap: 10px"),o.appendChild(d);const a=document.createElement("button");a.setAttribute("style","background-color: black; color: yellow"),a.textContent="Hide",d.appendChild(a);const u=document.createElement("button");u.setAttribute("style","background-color: black; color: orange"),u.textContent="New task",d.appendChild(u),u.addEventListener("click",(()=>{u.disabled=!0;const t=document.createElement("div");t.setAttribute("style","display: flex; flex-direction: column"),o.appendChild(t),s;const n=C("title",t),r=C("description",t),d=document.createElement("input");d.setAttribute("type","date"),t.appendChild(d);const a=C("priority",t),m=document.createElement("button");m.setAttribute("style","background-color: aqua; border-radius: 5px "),m.textContent="Add",t.appendChild(m),m.addEventListener("click",(()=>{u.disabled=!1,t.style.display="none",p(e.projectTitle,n.value,r.value,d.value,a.value),console.log(JSON.parse(localStorage.getItem(e.projectTitle))),i(n.value),x(c,l)}))})),a.addEventListener("click",(()=>{n.disabled=!1,function(t,e){t.style.display="none",e.style.display="none"}(o,a)}))}(e,n,o),console.log("EEE")}))}b.appendChild(k),function(){const t=document.createElement("input");t.setAttribute("style","background-color: black; color: gold; margin-top: 20px; grid-column: 1 / 4"),t.setAttribute("value","Project Name"),t.setAttribute("data-id",E),f.appendChild(t)}(),function(){const e=document.createElement("button");e.setAttribute("style","color: orange; background-color: black; grid-row: 2 / 3"),e.setAttribute("data-id",crypto.randomUUID()),e.textContent="Add",f.appendChild(e),e.addEventListener("click",(()=>{var e;e=document.querySelector(`[data-id="${E}"]`).value,t.push({projectTitle:e,id:crypto.randomUUID(),tasks:JSON.parse(localStorage.getItem(`${e}`))??[]}),d(e),localStorage.setItem("allProjects",JSON.stringify(t)),d(document.querySelector(`[data-id="${E}"]`).value),document.querySelector(`[data-id="${E}"]`).value="Project Name",v(n)}))}(),function(){for(let e of t)v(e)}(),b.style.display="none";const C=(t,e)=>{const n=document.createElement("input");return n.setAttribute("style","border: 0; font-size: .9rem; background-color: transparent"),n.setAttribute("value",t),e.appendChild(n),n};function x(t,e,o){const l=document.createElement("div");e.appendChild(l);const c=document.createElement("button");c.setAttribute("style","background-color: grey; color: white; border: 0; border-radius: 6px; height: fit-content"),c.textContent="delete",l.appendChild(c),c.addEventListener("click",(()=>{u(n.projectTitle,t.title),l.remove()}));const r=document.createElement("button");r.setAttribute("style","background-color: transparent; border: 0; font-weight: bold"),r.textContent=JSON.parse(localStorage.getItem(t.title)).title,l.insertBefore(r,c),r.addEventListener("click",(()=>{r.disabled=!0,function(t,e,n){const o=document.createElement("div");e.appendChild(o),h(t,"desc",o).style.opacity=.6,h(t,"dueDate",o),h(t,"priority",o);const l=document.createElement("strong");l.textContent="close",o.appendChild(l),l.addEventListener("click",(()=>{n.disabled=!1,o.style.display="none"}))}(t,l,r)}))}function h(t,e,n){const o=document.createElement("div");return o.textContent=t[e],n.appendChild(o),o.addEventListener("click",(()=>{S(n,o,e,t)})),o}function S(t,e,o,l){const c=document.createElement("button");c.textContent="save",t.replaceChild(c,e),c.addEventListener("click",(()=>{!function(t,e,o){a(n.projectTitle,o.title,e,t.value)}(r,o,l);const e=document.createElement("div");e.textContent=l[o],t.replaceChild(e,r),c.style.display="none",e.addEventListener("click",(()=>{S(t,e,o,l)}))}));const r=document.createElement("input");r.setAttribute("value",e.textContent),r.setAttribute("style","border: 0; background-color: transparent; font-size: 1rem"),t.insertBefore(r,c)}g.addEventListener("click",(()=>{A.style.display="block",g.style.display="none",b.style.display="block",A.addEventListener("click",(()=>{g.style.display="block",A.style.display="none",b.style.display="none"}))}));const A=document.createElement("button");A.textContent="Hide Projects",y.insertBefore(A,b),A.style.marginBottom="20px",A.style.display="none"})();